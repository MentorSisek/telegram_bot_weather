# Telegram Weather Bot

## API

Бот использует следующие внешние API:
- **Open-Meteo** — получение данных о погоде
- **Nominatim** — геокодирование названий городов

## Кэширование

- Геокодирование городов кэшируется навсегда
- Данные о погоде кэшируются на 5 минут
- Используется Redis для хранения кэша

## Структура проекта

```
src/
├── cmd/
│   └── main.py          # Точка входа
├── config.py            # Конфигурация
├── openmeteo/
│   ├── client.py        # Клиент для Open-Meteo API
│   └── cache.py         # Кэширование через Redis
└── telegram/
    ├── bot.py           # Основной модуль бота
    ├── handlers.py      # Обработчики команд
    └── middlewares.py   # Middleware для бота
```

## Тесты
Запуск тестов через pytest(пример с использованием uv):
```bash
uv run pytest
```


## Установка и запуск
Требуется docker && docker compose(плагин)

### Docker

1. Создайте файл `.env` с вашими настройками
2. Запустите через docker-compose:
```bash
docker-compose up -d --build
```

## Команды бота

- `/start` — приветствие и инструкции
- `/weather <город>` — погода в указанном городе
- `/celsius` — переключение на градусы Цельсия
- `/fahrenheit` — переключение на градусы Фаренгейта
- Отправка геолокации — погода по координатам
